{% extends "admin/base_site.html" %}
{% load adminmedia admin_list i18n %}
{% block title %}Room Rack{% endblock %}
{% block extrahead %}
<link type="text/css" rel="stylesheet" href="/static/js/jquery.qtip.min.css" />

<!--JavaScript-->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.qtip.min.js"></script>
<script type="text/javascript">
        // Create the tooltips only on document load
        $(document).ready(function() {
            var args = {
                    content: {
                            text: function(api) {
                                return $(this).find('#tooltip').html();
                            },
                            title: {
                                text: function(api) { return $(this).find('span:first').text(); },
                                button: true
                            }
                    },
                    style: {
                        classes: 'ui-tooltip-shadow ui-tooltip-dark'
                    },
                    position: {
                        my: 'bottom center',
                        target: 'mouse',
                        viewprot: $(window),
                        at: 'top center',
                    },
                    events: {
                        hidden: function(event, api) {
                                $(this).qtip('api').set('hide.event', 'mouseleave');
                                $(this).qtip('api').set('position.target', 'mouse');
                        }
                    }
                };
            $('.server').qtip(args);
            $('.blade').qtip(args);
            $('.server').click(function() {
                $(this).qtip('api').set('hide.event', 'click');
                $(this).qtip('api').set('position.target', $(this));
            });
        });
</script>

{% endblock %}

{% if not is_popup %}
  {% block breadcrumbs %}
    <div class="breadcrumbs">
      <a href="../../">
        {% trans "Home" %}
      </a>
       &rsaquo;
       <a href="../">Hardware</a>
      &rsaquo;
      {% trans "Room Rack" %}
    </div>
  {% endblock %}
{% endif %}

{% block content %}
{% for r in rooms %}
{% if r.rack_set.all.count %}
<div class="room" style="clear:both;padding-top: 2em; margin-top:2em;">
<h1><a href="{% url room-rack-view r.slug %}">{{ r.name }} - {{ r.building }}</a></h1>
    {% for rack in r.rack_set.all %}
        {% if rack_slug %}
            {% ifequal rack_slug rack.slug %}
                {% include "admin/hardware/rack/_rack_view.html" %}
            {% endifequal %}
        {% else %}
            {% include "admin/hardware/rack/_rack_view.html" %}
        {% endif %}
    {% endfor %}
</div>
{% endif %}
{% endfor %}
{% endblock content %}
